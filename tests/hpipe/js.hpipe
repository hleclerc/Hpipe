name = 
    # alpha | '_' | '$' | ( 128 .. 255 any ) (
    # alnum | '_' | '$' | ( 128 .. 255 any )
    # )**
    alpha alnum**
    { ++name; }

number = 
    # ( '0' ( 'x' | 'X' )     xdigit    ++ ) |
    # ( '0' ( 'o' | 'O' ) ( '0' .. '7' )++ ) |
    # ( '0' ( 'b' | 'B' ) ( '0' .. '1' )++ ) |
    # ( ( digit** '.' digit++ ) | ( digit++ '.'?? ) ( 'e' | 'E' ( '+' | '-' )?? digit++ )?? )
    digit++
    { ++number; }

punctuator = 
    # '>>>=' |

    # '>>>'  |
    # '>>='  |
    # '==='  | 
    # '<<='  |
    # '**='  |
    # '...'  | 
    # '!=='  | 

    # '||'   | 
    # '|='   |
    # '>>'   |
    # '>='   |
    # '=>'   | 
    # '=='   |
    # '<='   |
    # '<<'   |
    # '+='   | 
    # '++'   | 
    # '^='   |
    # '%='   |
    # '&='   |
    # '&&'   | 
    # '/='   | 
    # '*='   |
    # '**'   |
    # '!='   |
    # '-='   | 
    # '--'   | 

    # '~'    |
    # '|'    |
    # '>'    |
    # '='    |
    # '<'    |
    # '+'    |
    # '^'    |
    # '%'    |
    # '&'    |
    # '/'    |
    # '*'    |
    # '}'    |
    # '{'    |
    # ']'    |
    # '['    |
    # ')'    |
    # '('    |
    # '.'    |
    # '?'    |
    # '!'    |
    # ':'    |
    # ';'    |
    # ','    |
    # '-' 
    ';' | '=' 
    { ++punctuator; }

sp = 
    space++
    { ++sp; }

main = (
    sp         |
    name       |
    number     |
    punctuator |
    ( any { ++unk; } )
)** {    os << name 
     << " " << number
     << " " << punctuator
     << " " << sp
     << " " << unk;
}


beg_methods
    Hpipe::SI64 name       = 0;
    Hpipe::SI64 number     = 0;
    Hpipe::SI64 punctuator = 0;
    Hpipe::SI64 sp         = 0;
    Hpipe::SI64 unk        = 0;
end_methods

beg_test preproc
    input
        let a = 0;
    output
        2 1 2 3 0 status=OK
end_test
